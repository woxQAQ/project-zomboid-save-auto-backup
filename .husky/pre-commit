#!/bin/sh
# Skip pre-commit hooks in CI
if [ -n "$CI" ]; then
  exit 0
fi

echo "Running pre-commit hooks..."

echo "1. Running Rust clippy linter..."
(cd "$(dirname -- "$0")/../src-tauri" && cargo clippy --all-targets --all-features 2>&1) | grep -E "^error:" && {
  echo "‚ùå Clippy found compilation errors. Please fix them before committing."
  exit 1
}

echo "2. Running TypeScript type check..."
pnpm exec tsc --noEmit

echo "3. Running Biome linter and formatter check..."
pnpm exec biome check --write src/

echo "Pre-commit checks passed!"
